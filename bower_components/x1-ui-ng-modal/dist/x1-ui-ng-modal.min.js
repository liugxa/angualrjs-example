/**
 *
 * Licensed Materials - Property of IBM
 *
 * x1-ui-ng-modal.min.js
 *
 * (C) Copyright IBM Corporation 2014 - 2016.
 * U.S. Government Users Restricted Rights:  Use, duplication or disclosure
 * restricted by GSA ADP Schedule Contract with IBM Corp.
 *
 */

angular.module("x1.ui.modal",["pascalprecht.translate","ui.bootstrap"]);
angular.module("x1.ui.modal").service("x1Modal",["$modal","options","settings","$templateCache",function($modal,defaultOptions,defaultSettings,$templateCache){"use strict";function removeModalInstance(modalInstance){var index=modalInstances.indexOf(modalInstance);modalInstances.splice(index,1)}function extendConfigs(options,defaults){options=options||{};for(var prop in defaults)!options.hasOwnProperty(prop)&&defaults.hasOwnProperty(prop)&&(options[prop]=defaults[prop])}function getUserOptions(configs,data){return configs=configs||{},"undefined"==typeof configs[data]&&(configs[data]={}),configs[data]}var cancel=!1;this.getCancel=function(){return cancel};var modalInstances=[];this.open=this.show=function(customOptions){var modalInstance,options=getUserOptions(customOptions,"options"),settings=getUserOptions(customOptions,"settings"),data=getUserOptions(customOptions,"data");settings.windowClass?settings.windowClass+=" "+defaultSettings.windowClass:settings.windowClass=defaultSettings.windowClass,extendConfigs(options,defaultOptions),extendConfigs(settings,defaultSettings),options.contentTemplate=settings.contentTemplate;var settingsType=new RegExp(settings.type,"g"),settingsSize=new RegExp(settings.size,"g");return settings.windowClass=settings.windowClass.replace(settingsType,"").replace(settingsSize,""),settings.windowClass+=" "+settings.type,settings.windowClass+=" "+settings.size,settings.templateUrl||(settings.template=settings.template||$templateCache.get("modal/modal.html")),settings.controller=["$scope","$modalInstance",function($scope,$modalInstance){$scope.additionalButtonClickHandler=function(index){$scope.$broadcast(options.additionalButtons[index].eventName)},$scope.ok=function(){cancel=!1,$modalInstance.close($scope.data)},$scope.close=function(){cancel=!0,$modalInstance.dismiss("cancel")},$scope.$on("$destroy",function(){removeModalInstance(modalInstance)}),$scope.options=options,$scope.data=data}],modalInstance=$modal.open(settings),modalInstance.result.close=modalInstance.close,modalInstance.result.dismiss=modalInstance.dismiss,modalInstance.result.opened=modalInstance.opened,modalInstances.push(modalInstance),modalInstance.result},this.dismissAll=function(){modalInstances.forEach(function(modalInstance){modalInstance.dismiss()}),modalInstances.length=0}}]);
angular.module("x1.ui.modal").value("options",{actionButtonText:"x1UiNgModal.BTN.primary",closeButtonText:"x1UiNgModal.BTN.secondary",headerText:"x1UiNgModal.headerText",showCloseButton:!0,showActionButton:!0,additionalButtons:[]});
angular.module("x1.ui.modal").value("settings",{windowClass:"x1-ui-modal",size:"md",type:"default",backdrop:!0,keyboard:!0,modalFade:!0,contentTemplate:"modal/modal.default.html"});
!function(module){try{module=angular.module("x1.ui.modal")}catch(e){module=angular.module("x1.ui.modal",[])}module.run(["$templateCache",function($templateCache){$templateCache.put("modal/modal.default.html",'<p translate="{{data.text}}"></p>')}])}();
!function(module){try{module=angular.module("x1.ui.modal")}catch(e){module=angular.module("x1.ui.modal",[])}module.run(["$templateCache",function($templateCache){$templateCache.put("modal/modal.html",'<header role="banner" class="modal-header" aria-labelledby="x1ModalTitle">\n\t<h3 id="x1ModalTitle" class="modal-title" translate="{{options.headerText}}"></h3>\n\t<button type="button" class="close" ng-click="close()"\n\t\t\taria-label="{{\'x1UiNgModal.ARIA.modalClose\' | translate}}"\n\t\t\ttitle="{{\'x1UiNgModal.ARIA.modalClose\' | translate}}">\n\t\t<span class="sr-only" translate="x1UiNgModal.ARIA.modalClose"></span>\n\t\t<span class="glyphicon glyphicon-xs glyphicon-remove" aria-hidden="true"></span>\n\t</button>\n</header>\n<section role="main" class="modal-body" ng-include="options.contentTemplate"\n\t\taria-label="{{\'x1UiNgModal.ARIA.modalBody\' | translate}}"></section>\n<footer role="contentinfo" class="modal-footer"\n\t\taria-label="{{\'x1UiNgModal.ARIA.modalFooter\' | translate}}">\n\t<button ng-repeat="additionalButton in options.additionalButtons"\n\t\t\tclass="{{additionalButton.elementClass}}"\n\t\t\tng-disabled="additionalButton.disableElement"\n\t\t\tng-click="additionalButtonClickHandler($index)"\n\t\t\ttranslate="{{additionalButton.text}}"></button>\n\t<button ng-if="options.showActionButton" class="btn btn-primary modal-ok"\n\t\t\tng-disabled="options.actionDisabled" ng-click="ok()"\n\t\t\ttranslate="{{options.actionButtonText}}"></button>\n\t<button ng-if="options.showCloseButton" class="btn btn-secondary modal-close"\n\t\t\tng-click="close()" translate="{{options.closeButtonText}}"></button>\n</footer>')}])}();